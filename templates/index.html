<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MDS BASE DE DATOS</title>
    <!-- Aseguramos que el path al CSS sea correcto -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://fonts.cdnfonts.com/css/open-sauce-one" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="scroll-container">
        <!-- Header -->
        <header>
            <a href="#" class="logo">DataShop<span>.</span></a>
            <nav class="navbar">
                <a href="#consulta1">Productos Más Vendidos</a>
                <a href="#consulta2">Patrones de Compra</a>
                <a href="#consulta3">Comportamiento del Producto</a>
            </nav>
        </header>

        <!-- Hero Section -->
        <main>
            <section class="hero">
                <div class="hero-text">
                    <h1>¡Bienvenidos!</h1>
                    <p>Explora las últimas tendencias, descubre comportamientos y entiende las preferencias de tus clientes con nuestras herramientas intuitivas.</p>
                    <div class="container">
                        <input type="text" placeholder="Buscar...">
                        <button class="search-btn"><i class="fa-solid fa-magnifying-glass"></i></button>
                    </div>
                </div>
                <div class="hero-image">
                    <img src="https://plus.unsplash.com/premium_photo-1683288446489-71997f24255d?q=80&w=1374&auto=format&fit=crop" alt="Hero Image">
                </div>
            </section>

            <!-- Consulta 1 -->
                    <!-- Consulta 1 -->
            <section id="consulta1" class="consulta-section">
                <div class="consulta-text">
                    <h2>Productos Más Vendidos por Categoría</h2>
                    
                    <!-- Mensajes Flash -->
                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            <div class="flash-messages">
                                {% for category, message in messages %}
                                    <p class="{{ category }}">{{ message }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    {% endwith %}
                    
                    <form method="POST">
                        <label for="categoria">Categoría:</label>
                        <select id="categoria" name="categoria" required>
                            <option value="">--Seleccione una categoría--</option>
                            {% for categoria in categorias %}
                                <option value="{{ categoria }}" {% if categoria == categoria_seleccionada %}selected{% endif %}>
                                    {{ categoria }}
                                </option>
                            {% endfor %}
                        </select>
                        
                        <label for="fecha_inicio">Fecha Inicio:</label>
                        <input type="date" id="fecha_inicio" name="fecha_inicio" 
                            value="{{ fecha_inicio }}" required>
                        
                        <label for="fecha_fin">Fecha Fin:</label>
                        <input type="date" id="fecha_fin" name="fecha_fin" 
                            value="{{ fecha_fin }}" required>
                        
                        <button type="submit" class="consulta-btn">Consultar</button>
                    </form>
                    
                    {% if resultados_mas_vendidos %}
                        <div id="resultados1" class="resultados-tabla">
                            <h3>Resultados:</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID Producto</th>
                                        <th>Nombre</th>
                                        <th>Cantidad Vendida</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for item_key, item_name, cantidad in resultados_mas_vendidos %}
                                        <tr>
                                            <td>{{ item_key }}</td>
                                            <td>{{ item_name }}</td>
                                            <td>{{ cantidad }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% endif %}
                </div>
                <div class="consulta-image">
                    <img src="https://plus.unsplash.com/premium_vector-1724421640863-764d26d27959?q=80&w=2960&auto=format&fit=crop" alt="Consulta 1">
                </div>
            </section>
            

            <!-- Consulta 2 -->
            <section id="consulta2" class="consulta-section">
                <div class="consulta-text">
                    <h2>Análisis de Patrones de Compra Según Temporada</h2>
                    <form action="/consulta2" method="POST">
                        <label for="categoria2">Categoría:</label>
                        <input type="text" id="categoria2" name="categoria" required>
                        <label for="mes">Mes:</label>
                        <input type="number" id="mes" name="mes" min="1" max="12" required>
                        <button type="submit" class="consulta-btn">Consultar</button>
                    </form>
                    <div id="resultados2">
                        <!-- Aquí se mostrarán los resultados -->
                    </div>
                </div>
                <div class="consulta-image">
                    <img src="https://plus.unsplash.com/premium_vector-1724671151148-531617c2b38d?q=80&w=2960&auto=format&fit=crop" alt="Consulta 2">
                </div>
            </section>

            <!-- Consulta 3 -->
            <section id="consulta3" class="consulta-section">
                <div class="consulta-text">
                    <h2>Comportamiento del Producto a lo Largo del Tiempo</h2>
                    <form action="/consulta3" method="POST">
                        <label for="producto">Nombre del Producto:</label>
                        <input type="text" id="producto" name="producto" required>
                        <button type="submit" class="consulta-btn">Consultar</button>
                    </form>
                    <div id="resultados3">
                        <!-- Aquí se mostrarán los resultados -->
                    </div>
                </div>
                <div class="consulta-image">
                    <img src="https://plus.unsplash.com/premium_vector-1724686453071-654d26bb7d40?q=80&w=2960&auto=format&fit=crop" alt="Consulta 3">
                </div>
            </section>
        </main>

        <!-- Footer Section -->
        <div class="bajada">
            <div class="bajada-contenido">
                <h2>Integrantes</h2>
                <ul>
                    <li>Camila Laura</li>
                    <li>Andrés Oñate</li>
                    <li>Vania Sepúlveda</li>
                    <li>Javiera Yañez</li>
                </ul>
                <h2>Profesor</h2>
                <p>Sebastián Ferrada</p>
            </div>
            <div class="logo-esquina">
                <img src="http://mds.uchile.cl/wp-content/uploads/2020/04/logo_mds_web_01.svg" alt="Logo del grupo">
            </div>
        </div>
    </div>
</body>
</html>
